# ุฑุงูููุง ุตูุญู ุขูุงุฑู ุชูุงูโุตูุญู

## ุฎูุงุตู ุชุบุฑุงุช

ุฏุฑ ุงู ุจุฑูุฒุฑุณุงูุ ุณุณุชู ุงุฏุขูุฑูุง ุชุบุฑ ฺฉุฑุฏู ุงุณุช ุชุง ุจู ุฌุง ููุงุด ููุชูฺฉุดู ุณุงุฏูุ ฺฉ ุตูุญู ุชูุงูโุตูุญู ุขูุงุฑู ููุงุด ุฏูุฏ - ุฏููุงู ูุซู ุขูุงุฑูโูุง ุณุงุนุช ูุนููู.

## ูฺฺฏโูุง ุฌุฏุฏ

### 1. ุตูุญู ุขูุงุฑู ุชูุงูโุตูุญู ๐ฑ

- ููุช ุฒูุงู ุงุฏุขูุฑ ูโุฑุณุฏุ ฺฉ ุตูุญู ุชูุงูโุตูุญู ุจุงุฒ ูโุดูุฏ
- ูุงุฒ ุจู ฺฉูฺฉ ุฑู ููุชูฺฉุดู ูุณุช
- ฺฉุงุฑุจุฑ ููโุชูุงูุฏ ุขูุงุฑู ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏ

### 2. ุฏฺฉููโูุง ฺฉูุชุฑู

- **ุจุณุชู ุขูุงุฑู**: ุขูุงุฑู ุฑุง ูุชููู ฺฉุฑุฏู ู ุตูุญู ุฑุง ูโุจูุฏุฏ
- **ุจู ุชุนูู ุงูุฏุงุฎุชู (5 ุฏููู)**: ุขูุงุฑู ุฑุง ุจุฑุง 5 ุฏููู ุฏฺฏุฑ ุจู ุชุนูู ูโุงูุฏุงุฒุฏ

### 3. ุทุฑุงุญ ุฒุจุง ู ฺฉุงุฑุจุฑูพุณูุฏ

- ุงููุดู ูุฑูุฏ ุจุง ุงูฺฉุช scale
- ุขฺฉูู ุจุฒุฑฺฏ ู ูุงุถุญ
- ุฑูฺฏโุจูุฏ ููุงุณุจ ู ุฎูุงูุง
- ุญุงูุช ุชูุงูโุตูุญู ุจุฑุง ุฌูุจ ุชูุฌู ฺฉุงูู

## ูุญูู ฺฉุงุฑ ุณุณุชู

### ูุนูุงุฑ ุฌุฏุฏ

```
ReminderRepository
    โ
SimpleAlarmService (ุฒูุงูโุจูุฏ ุจุง Timer)
    โ
Callback: onAlarmTriggered
    โ
main.dart (_showAlarmScreen)
    โ
AlarmNotificationScreen (ุตูุญู ุชูุงูโุตูุญู)
```

### ูุงูโูุง ุชุบุฑ ุงูุชู

1. **lib/core/services/simple_alarm_service.dart**

   - ุญุฐู ูุงุจุณุชฺฏ ุจู `NotificationService`
   - ุงุถุงูู ฺฉุฑุฏู callback ุงุณุชุงุชฺฉ `onAlarmTriggered`
   - ุชุบุฑ ูุชุฏ `_triggerAlarm` ุจุฑุง ุตุฏุง ุฒุฏู callback

2. **lib/main.dart**

   - ุงุถุงูู ฺฉุฑุฏู import ุจุฑุง `SimpleAlarmService`
   - ุชูุธู callback ุฏุฑ `initState`
   - ุงุถุงูู ฺฉุฑุฏู ูุชุฏ `_showAlarmScreen`

3. **lib/data/repositories/reminder_repository.dart**

   - ุญุฐู ููุฏ ุงุณุชูุงุฏู ูุดุฏู `_notificationService`

4. **lib/presentation/screens/debug/notification_test_screen.dart**
   - ุจุฑูุฒุฑุณุงู ุฏฺฉููโูุง ุชุณุช
   - ุงุถุงูู ฺฉุฑุฏู ุชุณุช ุขูุงุฑู ููุฑ

## ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ฺฉุงุฑุจุฑุงู ุนุงุฏ

1. ฺฉ ุงุฏุขูุฑ ุจุณุงุฒุฏ (Task ุง Goal)
2. ุฒูุงู ุฑุง ุชูุธู ฺฉูุฏ
3. ูุนุงู ุจูุฏู ุงุฏุขูุฑ ุฑุง ุชุงุฏ ฺฉูุฏ
4. ููุช ุฒูุงู ุจุฑุณุฏุ ุตูุญู ุขูุงุฑู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุงุฒ ูโุดูุฏ
5. ูโุชูุงูุฏ ุขูุงุฑู ุฑุง ุจุจูุฏุฏ ุง ุจู ุชุนูู ุจูุฏุงุฒุฏ

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู

#### ุงุฌุงุฏ ุขูุงุฑู ุจู ุตูุฑุช ุจุฑูุงููโููุณ

```dart
final simpleAlarmService = SimpleAlarmService();

await simpleAlarmService.scheduleSimpleAlarm(
  id: 123,
  title: 'ุนููุงู ุงุฏุขูุฑ',
  body: 'ุชูุถุญุงุช ุงุฏุขูุฑ',
  scheduledDateTime: DateTime.now().add(Duration(minutes: 5)),
  reminderId: 'unique_reminder_id',
);
```

#### ุชูุธู Callback ุณูุงุฑุด

```dart
// ุฏุฑ initState ุง ุฌุง ููุงุณุจ
SimpleAlarmService.onAlarmTriggered = (id, title, body, reminderId) {
  // ููุทู ุณูุงุฑุด ุดูุง
  Navigator.push(
    context,
    MaterialPageRoute(
      builder: (context) => YourCustomAlarmScreen(...),
    ),
  );
};
```

## ุชุณุช ุณุณุชู

### ุงุณุชูุงุฏู ุงุฒ ุตูุญู ุชุณุช

1. ุจุฑูุงูู ุฑุง ุงุฌุฑุง ฺฉูุฏ
2. ุจู ุชุจ "ุชุณุช" ุฏุฑ ููุงุฑ ูพุงู ุจุฑูุฏ
3. ุฑู ุฏฺฉูู **"ุชุณุช ุขูุงุฑู ููุฑ"** ฺฉูฺฉ ฺฉูุฏ
4. ุตูุญู ุขูุงุฑู ุจุงุฏ ููุฑุงู ุจุงุฒ ุดูุฏ
5. ุฏฺฉูู "ุจุณุชู ุขูุงุฑู" ุฑุง ุงูุชุญุงู ฺฉูุฏ
6. ุฏูุจุงุฑู ุฏฺฉูู **"ุชุณุช ุขูุงุฑู ุตูุญูโุจุงุฒ ต ุซุงูู ุจุนุฏ"** ุฑุง ุจุฒูุฏ
7. 5 ุซุงูู ุตุจุฑ ฺฉูุฏ - ุตูุญู ุขูุงุฑู ุจุงุฏ ุจุงุฒ ุดูุฏ

### ูฺฉุงุช ููู ุชุณุช

- โ ุขูุงุฑู ููุฑ ุจุงุฏ ุจุฏูู ุชุงุฎุฑ ุตูุญู ุฑุง ุจุงุฒ ฺฉูุฏ
- โ ุขูุงุฑู ุฒูุงูโุจูุฏ ุดุฏู ุจุงุฏ ุฏููุงู ุจุนุฏ ุงุฒ ุฒูุงู ุชุนู ุดุฏู ูุนุงู ุดูุฏ
- โ ุฏฺฉูู "ุจุณุชู ุขูุงุฑู" ุจุงุฏ ุตูุญู ุฑุง ุจุจูุฏุฏ
- โ ุฏฺฉูู "ุจู ุชุนูู ุงูุฏุงุฎุชู" ุจุงุฏ ุงุฏุขูุฑ ุฌุฏุฏ ุจุฑุง 5 ุฏููู ุจุนุฏ ุงุฌุงุฏ ฺฉูุฏ
- โ ุณุณุชู ุจุฏูู ูุงุฒ ุจู ููุชูฺฉุดูโูุง ุณุณุชู ฺฉุงุฑ ูโฺฉูุฏ

## ูุฒุงุง ุงู ุฑูฺฉุฑุฏ

1. **ุชุฌุฑุจู ฺฉุงุฑุจุฑ ุจูุชุฑ**: ฺฉุงุฑุจุฑ ููโุชูุงูุฏ ุงุฏุขูุฑ ุฑุง ูุงุฏุฏู ุจฺฏุฑุฏ
2. **ุจุฏูู ูุงุฒ ุจู ูุฌูุฒ ููุชูฺฉุดู**: ุญุช ุงฺฏุฑ ูุฌูุฒ ููุชูฺฉุดู ุฏุงุฏู ูุดุฏู ุจุงุดุฏุ ฺฉุงุฑ ูโฺฉูุฏ
3. **ฺฉูุชุฑู ุจุดุชุฑ**: ุทุฑุงุญ ู ุฑูุชุงุฑ ุตูุญู ฺฉุงููุงู ุชุญุช ฺฉูุชุฑู ูุงุณุช
4. **ุณุงุฏฺฏ**: ูุงุฒ ุจู ูพฺฉุฑุจูุฏ ูพฺุฏู ููุชูฺฉุดู ูุณุช
5. **ูุงุจู ุงุทููุงูโุชุฑ**: ูุดฺฉูุงุช ููุชูฺฉุดู Android ุฑุง ุฏูุฑ ูโุฒูุฏ

## ูุญุฏูุฏุชโูุง

1. **ููุท ููุช ุจุฑูุงูู ุจุงุฒ ุงุณุช**: ุงฺฏุฑ ุจุฑูุงูู ุฏุฑ background ุจุงุดุฏุ ุขูุงุฑู ูุนุงู ููโุดูุฏ
   - ุจุฑุง ุญู ุงู ูุดฺฉูุ ูโุชูุงู ุงุฒ `android_alarm_manager_plus` ุงุณุชูุงุฏู ฺฉุฑุฏ
2. **Timer ุงุฒ ุจู ูโุฑูุฏ**: ุงฺฏุฑ ุจุฑูุงูู force close ุดูุฏุ timerูุง ุงุฒ ุจู ูโุฑููุฏ
   - ุจุง `rescheduleAllActiveReminders()` ุฏุฑ startup ุงู ูุดฺฉู ุญู ูโุดูุฏ

## ูพุดููุงุฏุงุช ุจุฑุง ุขูุฏู

1. โจ ุงุถุงูู ฺฉุฑุฏู ุตุฏุง ุขูุงุฑู ุณูุงุฑุด
2. โจ ุงุถุงูู ฺฉุฑุฏู ูุจุฑู
3. โจ ุงูฺฉุงู ุชูุธู ุฒูุงู snooze ุณูุงุฑุด
4. โจ ููุงุด ุชุตูุฑ ุง ุงุทูุงุนุงุช ุจุดุชุฑ ุฏุฑ ุตูุญู ุขูุงุฑู
5. โจ ุงุณุชูุงุฏู ุงุฒ `android_alarm_manager_plus` ุจุฑุง ฺฉุงุฑ ุฏุฑ background
6. โจ Wake lock ุจุฑุง ุฑูุดู ูฺฏู ุฏุงุดุชู ุตูุญู

## ุฎุทุงุงุจ (Troubleshooting)

### ุตูุญู ุขูุงุฑู ุจุงุฒ ููโุดูุฏ

1. ูุทูุฆู ุดูุฏ ุจุฑูุงูู ุจุงุฒ ุงุณุช (ุฏุฑ foreground)
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู callback ุฏุฑ `main.dart` ุชูุธู ุดุฏู ุจุงุดุฏ
3. ูุงฺฏโูุง console ุฑุง ฺฺฉ ฺฉูุฏ
4. ุงุฒ ุตูุญู ุชุณุช ุจุฑุง debugging ุงุณุชูุงุฏู ฺฉูุฏ

### Timer ุงุฌุฑุง ููโุดูุฏ

1. ุฒูุงู ุฑุง ุจุง `DateTime.now()` ููุงุณู ฺฉูุฏ
2. ูุทูุฆู ุดูุฏ ุฒูุงู ุฏุฑ ุขูุฏู ุงุณุช
3. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `scheduleSimpleAlarm` ุฎุทุง ูุฏุงุฏู ุจุงุดุฏ

### ุฏฺฉูู "ุจู ุชุนูู ุงูุฏุงุฎุชู" ฺฉุงุฑ ููโฺฉูุฏ

1. ูุทูุฆู ุดูุฏ `NotificationService` ููุฏุงุฑุฏู ุงููู ุดุฏู ุงุณุช
2. ุจุฑุฑุณ ฺฉูุฏ ฺฉู `scheduleNotification` ุฎุทุง ูุฏุงุฏู ุจุงุดุฏ
3. ูุงฺฏโูุง console ุฑุง ฺฺฉ ฺฉูุฏ

## ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุจุง ุงู ูฺฺฏ ุฏุงุฑุฏ:

1. ุงุจุชุฏุง ุตูุญู ุชุณุช ุฑุง ุงูุชุญุงู ฺฉูุฏ
2. ูุงฺฏโูุง console ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ูุทูุฆู ุดูุฏ ููู ูุงูโูุง ุจูโุฑูุฒ ูุณุชูุฏ
4. ุฏุฑ ุตูุฑุช ูุงุฒุ issue ุฏุฑ repository ุงุฌุงุฏ ฺฉูุฏ

---

**ูุณุฎู**: 2.0  
**ุชุงุฑุฎ ุจูโุฑูุฒุฑุณุงู**: ุงฺฉุชุจุฑ 2025  
**ุณุงุฒฺฏุงุฑ**: Flutter 3.x
